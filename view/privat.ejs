<!DOCTYPE html>
<html lang="nb">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Privat side</title>
    <link rel="stylesheet" href="/style/style.css" />
    <style>
        .enhet-list { width: 100%; margin-top: 2em; }
        .enhet-header, .enhet-row { display: grid; grid-template-columns: 1fr 1fr 1fr 1fr 1fr; align-items: center; gap: 0.5em; }
        .enhet-header { font-weight: bold; background: #eee; padding: 0.5em 0; }
        .enhet-row { margin-bottom: 0.5em; background: #fafafa; border-bottom: 1px solid #ccc; padding: 0.5em 0; }
        .enhet-row input[type=text], .enhet-row select { width: 95%; box-sizing: border-box; }
        button.delete { background: #c00; color: #fff; border: none; padding: 0.3em 0.7em; cursor: pointer; }
        button.save { background: #4d4d4d; color: #fff; border: none; padding: 0.3em 0.7em; cursor: pointer; }
    </style>
</head>
<body>
<header>
    <div class="logo"></div>
    <nav>
        <a href="/logout">Logg ut</a>
    </nav>
</header>
<main>
    <h1>Dine enheter</h1>
    <div class="enhet-list">
        <div class="enhet-header">
            <div>Modell</div>
            <div>Batteri-helse</div>
            <div>Serienummer</div>
            <div>Status</div>
            <div>Handling</div>
        </div>
        <% enheter.forEach(function(row) { %>
        <form class="enhet-row" action="/oppdater-enhet" method="POST">
            <input type="hidden" name="id" value="<%= row.id %>" />
            <div><input type="text" name="modell" value="<%= row.modell %>" required /></div>
            <div><input type="text" name="batteri_helse" value="<%= row.batteri_helse %>" required /></div>
            <div><input type="text" name="serienummer" value="<%= row.serienummer %>" required /></div>
            <div>
                <select name="status" required>
                    <option value="mottatt" <%= row.status === 'mottatt' ? 'selected' : '' %>>Mottatt</option>
                    <option value="under arbeid" <%= row.status === 'under arbeid' ? 'selected' : '' %>>Under arbeid</option>
                    <option value="ferdig" <%= row.status === 'ferdig' ? 'selected' : '' %>>Ferdig</option>
                </select>
            </div>
            <div style="display: flex; gap: 0.5em;">
                <button class="save" type="submit">Lagre</button>
        </form>
        <form class="inline" action="/slett-enhet" method="POST" onsubmit="return confirm('Slette denne enheten?');">
            <input type="hidden" name="id" value="<%= row.id %>" />
            <button class="delete" type="submit">Slett</button>
        </form>
            </div>
        <% }); %>
    </div>
</main>
<footer>&copy; 2025 Nexatech</footer>
</body>
</html>
